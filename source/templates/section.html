{% extends "base.html" %}

{% block title %}{{ section.title }} - {{ config.title }}{% endblock title %}

{% block description %}
  {% if section.description %}
    {{ section.description }}
  {% else %}
    {{ config.description }}
  {% endif %}
{% endblock description %}

{% block content %}
<main class="main-content">
  <header class="section-header">
    <h1>{{ section.title }}</h1>
    {% if section.description %}
      <p class="section-description">{{ section.description }}</p>
    {% endif %}
  </header>

  {% if section.content %}
    <div class="section-content">
      {{ section.content | safe }}
    </div>
  {% endif %}

  {% if section.pages %}
    <section class="pages-list">
      <h2>Pages</h2>
      <ul>
        {% for page in section.pages %}
          <li>
            <article class="page-summary">
              <h3><a href="{{ page.permalink }}">{{ page.title }}</a></h3>
              {% if page.summary %}
                <p>{{ page.summary }}</p>
              {% endif %}
              {% if page.date %}
                <time datetime="{{ page.date }}">{{ page.date | date(format="%d %B %Y") }}</time>
              {% endif %}
            </article>
          </li>
        {% endfor %}
      </ul>
    </section>
  {% endif %}

  {% if section.subsections %}
    <section class="subsections-list">
      <h2>Sections</h2>
      <ul>
        {% for subsection_path in section.subsections %}
          {% set subsection = get_section(path=subsection_path) %}
          <li>
            <h3><a href="{{ subsection.permalink }}">{{ subsection.title }}</a></h3>
            {% if subsection.description %}
              <p>{{ subsection.description }}</p>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </section>
  {% endif %}
</main>
{% endblock content %}
